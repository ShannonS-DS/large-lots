{% extends "base.html" %}
{% load staticfiles %}
{% load lots_filters %}
{% block title %}Location and zoning check{% endblock %}
{% block extra_css %}
    <style id="applied-styles">
      #full_area_lots {
        polygon-fill: #41ab5d;
        polygon-opacity: 0.7;
        line-color: #006d2c;
        line-width: 0.5;
        line-opacity: 1;
      }
    </style>
    <style id="owned-styles">
      #full_area_lots {
        polygon-fill: #A1285D;
        polygon-opacity: 0.7;
        line-color: #680D35;
        line-width: 0.5;
        line-opacity: 1;
      }
    </style>
    <style id="other-applied-styles">
      #full_area_lots {
        polygon-fill: #A1285D;
        polygon-opacity: 0.2;
        line-color: #680D35;
        line-width: 0.5;
        line-opacity: 1;
      }
    </style>
{% endblock %}
{% block content %}

<div class="row">
  <div class="col-md-4">
    <h2>Review Process: Location and zoning check</h2>
    <form role="form" id="deed-check" method="POST" action="{% url 'location_check_submit' application.id %}">
      {% csrf_token %}
      <div class="form-group">
        <div class="checkbox">
          <label>
            <input id="block" name="block" type="checkbox"/>
            Is the lot for sale on the <a href='/faq/#faq-block' target='_blank'>same block</a> as the applicant's poperty?
          </label>
        </div>

        {% if other_owned_pins %}
          <h4>Multiple people want to buy this lot. (Click only one option.)</h4>
          <div class="checkbox">
            <label>
              <input id="adjacent" name="adjacent" type="checkbox"/>
              Is the applicant-under-review adjacent to the lot?
            </label>
          </div>
          <div class="checkbox">
            <label>
              <input id="not-adjacent" name="not-adjacent" type="checkbox"/>
              Is another applicant adjacent to the lot?
            </label>
          </div>
          <div class="checkbox">
            <label>
              <input id="lottery" name="lottery" type="checkbox"/>
              Or, are multiple applicants adjacent or on the same block?
            </label>
          </div>
        {% endif %}

      </div>
      <p><button type="submit" class="btn btn-success">Submit</button></p>
    </form>
    <!-- <div id='owned-property'>{{ application.owned_address }}</div>
    <div id='application-property'>
      {% for lot in application.lot_set.all %}
        {{ lot.address }}
      {% endfor %}
    </div> -->
  </div>
  <div class="col-md-8" id="locationcheck-map"></div>
</div>



{% endblock %}

{% block extra_js %}
  <script type="text/javascript" src="https://maps.google.com/maps/api/js?sensor=false&libraries=places&v=3.17"></script>
  <script src="{% static 'js/jquery.address.js' %}"></script>
  <script src="{% static 'js/jquery.scrollto.js' %}"></script>
  <script src="https://cartodb-libs.global.ssl.fastly.net/cartodb.js/v3/3.15/cartodb.js"></script>
  <script src="{% static 'js/leaflet-google.js' %}" ></script>
  <script src="{% static 'js/leaflet.label.js' %}" type="text/javascript"></script>
  <script src="{% static 'js/largelots_locationcheck.js' %}"></script>
  <script>
    var ownedPin = '{{ application.owned_pin }}';
    var appliedPins = {{ applied_pins|safe }};
    var otherOwnedPins = {{ other_owned_pins|safe }};

    $(function() {
      LargeLots.initialize();
    });
  </script>
{% endblock %}